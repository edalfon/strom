---
title: "Strom Dashboard"
format: dashboard
---

```{python}
#| include: false
import strom
normalstrom_consumption = strom.read_result("normalstrom_consumption")
waermestrom_consumption = strom.read_result("waermestrom_consumption")
# lightbulb
# thermometer-sun
strom_per_day = strom.read_result("make_strom_per_day")
```

# Durchschnitt

## Row

```{python}
#| content: valuebox
#| title: "Normalstromverbrauch pro Tag"
dict(
  icon = "lightning-charge",
  color = "light",
  value = "{:.1f} kWh".format(normalstrom_consumption["Use/Day"].values[0])
)
```

```{python}
#| content: valuebox
#| title: "Normalstromverbrauch im Jahr"
dict(
  icon = "activity",
  color = "light",
  value = "{:.0f} kWh".format(normalstrom_consumption["Use/Year"].values[0])
)
```


```{python}
#| content: valuebox
#| title: "Wärmestromverbrauch pro Tag"
dict(
  icon = "lightning-charge",
  color = "light",
  value = "{:.1f} kWh".format(waermestrom_consumption["Use/Day"].values[0])
)
```

```{python}
#| content: valuebox
#| title: "Wärmestromverbrauch im Jahr"
dict(
  icon = "activity",
  color = "light",
  value = "{:.0f} kWh".format(waermestrom_consumption["Use/Year"].values[0])
)
```


## Row

```{python}
#| content: valuebox
#| title: "Normalstrom Kosten pro Tag"
dict(
  icon = "currency-exchange",
  color = "light",
  value = "{:.1f} €".format(normalstrom_consumption["Daily Exp"].values[0])
)
```

```{python}
#| content: valuebox
#| title: "Normalstrom Kosten im Jahr"
dict(
  icon = "credit-card",
  color = "warning",
  value = "{:.0f} €".format(normalstrom_consumption["Yearly Exp"].values[0])
)
```


```{python}
#| content: valuebox
#| title: "Wärmestrom Kosten pro Tag"
dict(
  icon = "currency-exchange",
  color = "light",
  value = "{:.1f} €".format(waermestrom_consumption["Daily Exp"].values[0])
)
```



```{python}
#| content: valuebox
#| title: "Wärmestrom Kosten im Jahr"
dict(
  icon = "credit-card",
  color = "warning",
  value = "{:.0f} €".format(waermestrom_consumption["Yearly Exp"].values[0])
)
```

## Row

Placeholder

# New card

```{python}
#| eval: true
#| title: Reason for churn by quarter
import plotly.express as px
import plotly.graph_objects as go
from datetime import datetime, timedelta

fig = px.bar(strom_per_day, y="nd", x="date")
fig.update_xaxes(
    rangeslider_visible=True,
    rangeselector=dict(
        buttons=list(
            [
                dict(count=15, label="15d", step="day", stepmode="backward"),
                dict(count=1, label="1m", step="month", stepmode="backward"),
                dict(count=6, label="6m", step="month", stepmode="backward"),
                dict(count=1, label="YTD", step="year", stepmode="todate"),
                dict(count=1, label="1y", step="year", stepmode="backward"),
                dict(step="all"),
            ]
        )
    ),
    range=[strom_per_day["date"].max() - timedelta(days=365), strom_per_day["date"].max()],
)
fig.update_xaxes(rangeslider_thickness=0.1)
fig
```


```{python}
#| eval: false
import plotly.express as px
import plotly.graph_objects as go
from datetime import datetime, timedelta

fig = px.bar(strom_per_day, y="wd", x="date")
fig.update_xaxes(
    rangeslider_visible=True,
    rangeselector=dict(
        buttons=list(
            [
                dict(count=15, label="15d", step="day", stepmode="backward"),
                dict(count=1, label="1m", step="month", stepmode="backward"),
                dict(count=6, label="6m", step="month", stepmode="backward"),
                dict(count=1, label="YTD", step="year", stepmode="todate"),
                dict(count=1, label="1y", step="year", stepmode="backward"),
                dict(step="all"),
            ]
        )
    ),
    range=[strom_per_day["date"].max() - timedelta(days=365), strom_per_day["date"].max()],
)
fig.update_xaxes(rangeslider_thickness=0.1)
fig
```
